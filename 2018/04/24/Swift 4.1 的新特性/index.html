<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Swift 4.1 的新特性 | Hexo</title>
  <meta name="author" content="John Doe">
  
  <meta name="description" content="苹果公司在 3.29 正式发布了正式版的Xcode 9.3和Swift 4.1, 让我们看看Swift 4.1带来了哪些新功能和新亮点
测试需要Xcode9.3, 请确保你的Xcode是最新的9.3版本
Swift 4.1与Swift 4.0是源代码兼容的，所以如果你已经使用Xcode中的Swift Migrator将你的项目迁移到Swift 4.0，那么新特性不会破坏你的代码
下面在Xcode9.3下新建一个Playground工程, 测试我们的代码">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Swift 4.1 的新特性">
  <meta property="og:site_name" content="Hexo">

  
    <meta property="og:image" content="">
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="https://oindk07nf.qussl.com/atom-one-dark.css" media="screen" type="text/css">
  <link rel="stylesheet" href="https://oindk07nf.qussl.com/style.css?v=20170717" media="screen" type="text/css">
  <link rel="stylesheet" href="https://oindk07nf.qussl.com/animation.css?v=7" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>
</html>

<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Hexo</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2018-04-24T13:16:40.000Z"><a href="/2018/04/24/Swift 4.1 的新特性/">2018-04-24</a></time>
      
      
  
    <h1 class="title">Swift 4.1 的新特性</h1>
  

    </header>
    <div class="entry">
      
        <ul>
<li>苹果公司在 3.29 正式发布了正式版的<code>Xcode 9.3</code>和<code>Swift 4.1</code>, 让我们看看<code>Swift 4.1</code>带来了哪些新功能和新亮点</li>
<li>测试需要Xcode9.3, 请确保你的Xcode是最新的9.3版本</li>
<li><code>Swift 4.1</code>与<code>Swift 4.0</code>是源代码兼容的，所以如果你已经使用<code>Xcode</code>中的<code>Swift Migrator</code>将你的项目迁移到<code>Swift 4.0</code>，那么新特性不会破坏你的代码</li>
<li>下面在<code>Xcode9.3</code>下新建一个<code>Playground</code>工程, 测试我们的代码</li>
</ul>
<a id="more"></a>
<h4 id="条件一致性-Conditional-Conformance"><a href="#条件一致性-Conditional-Conformance" class="headerlink" title="条件一致性(Conditional Conformance)"></a>条件一致性(Conditional Conformance)</h4><ul>
<li>条件一致性使类型参数满足特定条件的泛型类型的协议一致性 <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0143-conditional-conformances.md" target="_blank" rel="noopener">[ SE-0143 ]</a></li>
<li>在Swift 4中，如果数组、字典或者可选类型的元素类型遵循<code>Equatable</code>，你是可以在数组之间、字典之间和可选类型之间进行比较的, 如下示例:</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Int类型的数组</span></span><br><span class="line">let arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">let arr2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">print(arr1 == arr2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较value值为Int的字典</span></span><br><span class="line">let dic1 = [<span class="string">"age"</span>: <span class="number">19</span>, <span class="string">"score"</span>: <span class="number">60</span>]</span><br><span class="line">let dic2 = [<span class="string">"age"</span>: <span class="number">19</span>, <span class="string">"score"</span>: <span class="number">60</span>]</span><br><span class="line">print(dic1 == dic2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较Int?</span></span><br><span class="line">let age1 = dic1[<span class="string">"age"</span>]</span><br><span class="line">let age2 = dic2[<span class="string">"age"</span>]</span><br><span class="line">print(age1 == age2)</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 以上输出结果都是: true</span></span><br></pre></td></tr></table></figure>
<p>这里如果我们把<code>Int</code>都换成<code>Int?</code>类型, 在<code>Swift4.0</code>中是不能编译通过的, 如下:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Int类型的数组</span></span><br><span class="line">let arr1: [Int?] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">let arr2: [Int?] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">print(arr1 == arr2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较value值为Int的字典</span></span><br><span class="line">let dic1: [String: Int?] = [<span class="string">"age"</span>: <span class="number">19</span>, <span class="string">"score"</span>: <span class="number">60</span>]</span><br><span class="line">let dic2: [String: Int?] = [<span class="string">"age"</span>: <span class="number">19</span>, <span class="string">"score"</span>: <span class="number">60</span>]</span><br><span class="line">print(dic1 == dic2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较Int?</span></span><br><span class="line">let age1 = dic1[<span class="string">"age"</span>]</span><br><span class="line">let age2 = dic2[<span class="string">"age"</span>]</span><br><span class="line">print(age1 == age2)</span><br></pre></td></tr></table></figure>
<ul>
<li>在这些实例中, 我们用<code>==</code>测试相等性, 在Swift4.0中, <code>Int</code>类型遵循<code>Equatable</code>协议, 可以比较, 但是<code>Int?</code>类型却没有遵循<code>Equatable</code>协议</li>
<li>但是在Swift4.1中, 完美的解决了这个问题, 上述代码可比那已通过, 且都输出: <code>true</code></li>
<li>在<code>Swift 4.0</code>中<code>[Set&lt;Int&gt;]</code>之间可以直接对比，但是<code>[[Int]]</code>不能。现在<code>Swift 4.1</code>中，<code>[[Int]]</code>也能直接对比</li>
<li>总的来说，<code>Swift 4.1</code>的<code>Array</code>、<code>Dictionary</code>和<code>Optional</code>，只要他们的元素都遵循了<code>Equatable</code>和<code>Hashable</code>，那么他们也遵循<code>Equatable</code>和<code>Hashable</code></li>
</ul>
<h4 id="合成-Equatable-和-Hashable"><a href="#合成-Equatable-和-Hashable" class="headerlink" title="合成 Equatable 和 Hashable"></a>合成 <code>Equatable</code> 和 <code>Hashable</code></h4><ul>
<li>如果对象相等，则这两个对象的 <code>hash</code> 值一定相等</li>
<li>如果两个对象 <code>hash</code> 值相等，这两个对象不一定相等。</li>
<li><code>Swift</code> 中 <code>Hashable</code> 一定是 <code>Equatable</code>，因为前者继承了后者。<br>在<code>Swift 4</code>中，若遵循<code>Equatable</code>协议的时候，我们必须实现<code>Equatable</code>协议的<code>==</code>方法, <code>Equatable</code>协议如下:</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public protocol Equatable &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Returns a Boolean value indicating whether two values are equal.</span></span><br><span class="line">    <span class="comment">///</span></span><br><span class="line">    <span class="comment">/// Equality is the inverse of inequality. For any values `a` and `b`,</span></span><br><span class="line">    <span class="comment">/// `a == b` implies that `a != b` is `false`.</span></span><br><span class="line">    <span class="comment">///</span></span><br><span class="line">    <span class="comment">/// - Parameters:</span></span><br><span class="line">    <span class="comment">///   - lhs: A value to compare.</span></span><br><span class="line">    <span class="comment">///   - rhs: Another value to compare.</span></span><br><span class="line">    public <span class="keyword">static</span> func == (lhs: Self, rhs: Self) -&gt; Bool</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在Swift4.0中, 必须实现<code>Equatable</code>协议的方法</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Name: Equatable &#123;</span><br><span class="line">    var name1 = <span class="string">"name1"</span></span><br><span class="line">    var name2 = <span class="string">"name2"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> func == (lhs: Name, rhs: Name) -&gt; Bool &#123;</span><br><span class="line">        <span class="keyword">return</span> lhs.name1 == rhs.name1 &amp;&amp;</span><br><span class="line">            lhs.name2 == rhs.name2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>Swift 4.1</code>，只需要加上<code>Equatable</code>即可, 不需要实现任何协议方法</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Name: Equatable &#123;</span><br><span class="line">    var name1 = <span class="string">"name1"</span></span><br><span class="line">    var name2 = <span class="string">"name2"</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="JSON编码时支持Camel-Case和Snake-Case之间的转换"><a href="#JSON编码时支持Camel-Case和Snake-Case之间的转换" class="headerlink" title="JSON编码时支持Camel Case和Snake Case之间的转换"></a><code>JSON</code>编码时支持<code>Camel Case</code>和<code>Snake Case</code>之间的转换</h4><ul>
<li><code>Swift 4.0</code>引入了<code>Codable</code>，但是有个麻烦的问题：如果<code>JSON</code>数据的<code>key</code>命名格式是<code>snake_case</code>的话，我们必须创建自己的<code>CodingKeys</code>来告诉苹果怎么转换。在<code>Swift 4.0</code>中</li>
<li>但是在<code>Swift 4.1</code>中，苹果给<code>JSONDecoder</code>引入了一个属性<code>keyDecodingStrategy</code>；对应的<code>JSONEncoder</code>引入了一个属性<code>keyEncodingStrategy</code>。这样我们就不需要设置定义<code>CodingKeys</code>了。只需要在<code>decoding</code>的时候把<code>keyDecodingStrategy</code>设置为<code>.convertFromSnakeCase</code>；在<code>encoding</code>的时候把<code>keyEncodingStrategy</code>设置为<code>.convertToSnakeCase</code></li>
<li>下面是分别针对数组/字典/集合的解析形式</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Student: Codable, Hashable &#123;</span><br><span class="line">  let firstName: String</span><br><span class="line">  let averageGrade: Int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let cosmin = Student(firstName: <span class="string">"Cosmin"</span>, averageGrade: <span class="number">10</span>)</span><br><span class="line">let george = Student(firstName: <span class="string">"George"</span>, averageGrade: <span class="number">9</span>)</span><br><span class="line">let encoder = JSONEncoder()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Encode an Array of students</span></span><br><span class="line">let students = [cosmin, george]</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  try encoder.encode(students)</span><br><span class="line">&#125; catch &#123;</span><br><span class="line">  print(<span class="string">"Failed encoding students array: \(error)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Encode a Dictionary with student values</span></span><br><span class="line">let studentsDictionary = [<span class="string">"Cosmin"</span>: cosmin, <span class="string">"George"</span>: george]</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  try encoder.encode(studentsDictionary)</span><br><span class="line">&#125; catch &#123;</span><br><span class="line">  print(<span class="string">"Failed encoding students dictionary: \(error)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Encode a Set of students</span></span><br><span class="line">let studentsSet: Set = [cosmin, george]</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  try encoder.encode(studentsSet)</span><br><span class="line">&#125; catch &#123;</span><br><span class="line">  print(<span class="string">"Failed encoding students set: \(error)"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Encode an Optional Student</span></span><br><span class="line">let optionalStudent: Student? = cosmin</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  try encoder.encode(optionalStudent)</span><br><span class="line">&#125; catch &#123;</span><br><span class="line">  print(<span class="string">"Failed encoding optional student: \(error)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Hashable-Index-Types-哈希化索引"><a href="#Hashable-Index-Types-哈希化索引" class="headerlink" title="Hashable Index Types(哈希化索引)"></a><code>Hashable Index Types</code>(哈希化索引)</h4><p>扩展 <code>Key-path</code> 表达式在标准库中的使用范围。让标准库中所有的索引类型都符合 <code>Hashable</code> 协议，这样，<code>[Int]</code>、<code>String</code> 和所有其它标准集合使用 <code>key-path</code> 下标时，表现都是一样的</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let swiftString2 = <span class="string">"one two three"</span></span><br><span class="line">let charact1 = \String.[swiftString2.startIndex]</span><br><span class="line">print(swiftString2[keyPath: charact1])</span><br><span class="line"></span><br><span class="line">let arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">let value2 = \[Int].[<span class="number">1</span>]</span><br><span class="line">print(arr[keyPath: value2])</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果:</span></span><br><span class="line">o</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<h4 id="compactMap的用法"><a href="#compactMap的用法" class="headerlink" title="compactMap的用法"></a><code>compactMap</code>的用法</h4><p>在<code>Swift 4.0</code>中，我们经常使用<code>flatMap</code>来过滤<code>nil</code>，也可以进行降维操作, 详情可参考<a href="https://www.titanjun.top/2017/05/19/Swift%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/" target="_blank" rel="noopener">Swift函数式编程之高级用法</a></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="literal">nil</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="literal">nil</span>]</span><br><span class="line">let arr1 = arr.flatMap(&#123; $<span class="number">0</span> &#125;)</span><br><span class="line">print(arr1)</span><br><span class="line"></span><br><span class="line"><span class="comment">//这样使用会有类似的警告</span></span><br><span class="line">'flatMap' is deprecated: Please use compactMap(_:) for the case where closure returns an optional value</span><br><span class="line">Use 'compactMap(_:)' instead</span><br><span class="line"></span><br><span class="line"><span class="comment">//Swift4.1中的用法</span></span><br><span class="line">let arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="literal">nil</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="literal">nil</span>]</span><br><span class="line">let arr2 = arr.compactMap(&#123; $<span class="number">0</span> &#125;)</span><br><span class="line">print(arr2)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>主要是因为在<code>Swift4.0</code>中<code>flatMap</code>有很多重载, 可能会引起歧义, 所以在<code>Swift4.1</code>中把<code>flatMap</code>重命名为<code>compactMap</code></p>
</blockquote>
<h4 id="除了协议中的-weak-和-unowned。"><a href="#除了协议中的-weak-和-unowned。" class="headerlink" title="除了协议中的 weak 和 unowned。"></a>除了协议中的 weak 和 unowned。</h4><ul>
<li>当你在<code>Tune</code>协议中定义了两个属性<code>key</code>和<code>pitch</code>, <code>pitch</code>可能为<code>nil</code>, 所以你在协议中可以用<code>weak</code>修饰</li>
<li>但是如果在协议本身中定义的话，<code>weak</code>和<code>unowned</code>都没有实际意义, 所以在<code>Swift4.1</code>中就已经去掉了这些关键字, 并且在协议中使用这些关键字将会爆出警告</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Key &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> Pitch &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Swift 4</span></span><br><span class="line">protocol Tune &#123;</span><br><span class="line">    unowned var key: Key &#123; get set &#125;</span><br><span class="line">    <span class="keyword">weak</span> var pitch: Pitch? &#123; get set &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Swift 4.1</span></span><br><span class="line">protocol Tune &#123;</span><br><span class="line">    var key: Key &#123; get set &#125;</span><br><span class="line">    var pitch: Pitch? &#123; get set &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="UnsafeMutableBufferPointer的改变"><a href="#UnsafeMutableBufferPointer的改变" class="headerlink" title="UnsafeMutableBufferPointer的改变"></a><code>UnsafeMutableBufferPointer</code>的改变</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Swift4.0</span></span><br><span class="line">let buffer = UnsafeMutableBufferPointer&lt;Int&gt;(start: UnsafeMutablePointer&lt;Int&gt;.allocate(capacity: <span class="number">10</span>),</span><br><span class="line">                                             count: <span class="number">10</span>)</span><br><span class="line">let mutableBuffer = UnsafeMutableBufferPointer(start: UnsafeMutablePointer(mutating: buffer.baseAddress),</span><br><span class="line">                                               count: buffer.count)</span><br><span class="line"></span><br><span class="line"><span class="comment">//Swift4.1</span></span><br><span class="line">let buffer = UnsafeMutableBufferPointer&lt;Int&gt;.allocate(capacity: <span class="number">10</span>)</span><br><span class="line">let mutableBuffer = UnsafeMutableBufferPointer(mutating: UnsafeBufferPointer(buffer))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>相对<code>Swift4.0</code>的改变, <code>Swift4.1</code>这点改变键值太微不足道了, 传说中<code>Swift5</code>的<code>API</code>会趋于稳定, 但是估计改变可能也是非常大的, 坐等<code>Swift5</code>发布…</p>
</blockquote>
<h4 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h4><ul>
<li><a href="https://www.raywenderlich.com/187826/whats-new-in-swift-4-1" target="_blank" rel="noopener">What’s New in Swift 4.1?</a></li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/Swift学习笔记/">Swift学习笔记</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/Equatable/">Equatable</a>, <a href="/tags/Hashable/">Hashable</a>, <a href="/tags/Swift4-1/">Swift4.1</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://yoursite.com/2018/04/24/Swift 4.1 的新特性/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/Swift学习笔记/">Swift学习笔记</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Array/">Array</a><small>1</small></li>
  
    <li><a href="/tags/Dictionary/">Dictionary</a><small>1</small></li>
  
    <li><a href="/tags/Equatable/">Equatable</a><small>2</small></li>
  
    <li><a href="/tags/Hashable/">Hashable</a><small>2</small></li>
  
    <li><a href="/tags/String/">String</a><small>1</small></li>
  
    <li><a href="/tags/Swift4-0/">Swift4.0</a><small>1</small></li>
  
    <li><a href="/tags/Swift4-1/">Swift4.1</a><small>1</small></li>
  
    <li><a href="/tags/Swift4-2/">Swift4.2</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2018 John Doe
  
</div>
<div class="clearfix"></div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<span id="busuanzi_container_site_pv">
  本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>
</footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
